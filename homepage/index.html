<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bus Fleet Management System</title>
  <link rel="stylesheet" href="../styles/styles.css" />
  <link rel="stylesheet" href="../styles/toast_loader.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="main.js"></script>
</head>

<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo-icon">B</div>
        <h3>BusFleet</h3>
      </div>
      <nav class="sidebar-nav">
        <button onclick="showStudents()" class="nav-item active" data-section="students">
          <i class="fas fa-user-graduate"></i> <span>Students</span>
        </button>
        <button onclick="showRoutes()" class="nav-item" data-section="routes">
          <i class="fas fa-route"></i> <span>Routes</span>
        </button>
        <button onclick="showBuses()" class="nav-item" data-section="buses">
          <i class="fas fa-bus"></i> <span>Buses</span>
        </button>
        <button onclick="showDrivers()" class="nav-item" data-section="drivers">
          <i class="fas fa-id-card"></i> <span>Drivers</span>
        </button>
        <button onclick="showMaintenanceLogs()" class="nav-item" data-section="maintenance">
          <i class="fas fa-tools"></i> <span>Maintenance</span>
        </button>
        <button onclick="showIncidents()" class="nav-item" data-section="incidents">
          <i class="fas fa-exclamation-triangle"></i> <span>Incidents</span>
        </button>
      </nav>
      <div class="sidebar-footer">
        <button onclick="logout()" class="logout-btn">
          <i class="fas fa-sign-out-alt"></i> <span>Logout</span>
        </button>
      </div>
    </aside>

    <main class="main-content">
      <header class="top-header">
        <div class="header-left">
          <button id="sidebar-toggle" class="icon-btn" aria-label="Toggle Sidebar"><i class="fas fa-bars"></i></button>
          <h2 id="page-title">Dashboard</h2>
        </div>
        <div class="header-right">
          <a href="analytics.html" id="show-charts-btn" class="icon-btn mr-4" title="Visual Analytics">
            <i class="fas fa-chart-bar"></i>
          </a>
          <div id="user-profile">
            <div class="user-info">
              <span id="logged-in-as">User</span>
              <span class="user-role">Admin</span>
            </div>
            <div class="profile-icon">
              <i class="fas fa-user"></i>
            </div>
          </div>
        </div>
      </header>

      <div class="content-wrapper">
        <div class="data-panel">
          <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 h-full flex flex-col">
            <div class="toolbar border-b border-gray-100 pb-4 mb-4">
              <div class="search-bar">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="search-input" placeholder="Search records..." onkeyup="searchData()"
                  class="flex-1 px-3" />
                <kbd
                  class="hidden md:inline-block px-1.5 py-0.5 text-[10px] font-semibold text-gray-400 bg-gray-50 border border-gray-200 rounded-md">Ctrl
                  K</kbd>
              </div>
              <div class="actions" style="display: flex; gap: 10px;">
                <button class="btn-secondary" onclick="window.exportData()">
                  <i class="fas fa-file-export"></i> Export
                </button>
                <button class="btn-primary" onclick="openAddForm()">
                  <i class="fas fa-plus"></i> Add New
                </button>
              </div>
            </div>

            <div id="content" class="data-view border-none shadow-none flex-1 overflow-auto">
              <div class="empty-state py-20 text-center">
                <i class="fas fa-bus-alt text-4xl text-gray-200 mb-4"></i>
                <p class="text-gray-400">Select a section to view data</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <button class="fab-btn md:hidden" onclick="openAddForm()" title="Add New">
    <i class="fas fa-plus"></i>
  </button>

  <div id="add-form">
    <div class="form-container">
      <span class="close" onclick="closeForm()">&times;</span>
      <h2 id="form-title">Add New Item</h2>
      <form id="data-form">
        <!-- Dynamic fields -->
      </form>
      <div class="form-buttons">
        <button type="submit" form="data-form">Save Changes</button>
        <button type="button" onclick="closeForm()" class="cancel">Cancel</button>
      </div>
    </div>
  </div>

  <div id="profile-modal"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); z-index: 200; align-items: center; justify-content: center;">
    <div class="form-container">
      <h2 style="margin-bottom: 20px;">Edit Profile</h2>
      <form id="profile-form">
        <label style="display:block; margin-bottom:8px; font-weight:600; color:var(--text-secondary);">User Info</label>
        <input type="text" name="username" placeholder="Username" required>
        <input type="email" name="email" placeholder="Email Address" required>

        <label
          style="display:block; margin-bottom:8px; font-weight:600; color:var(--text-secondary); margin-top:20px;">Change
          Password (Optional)</label>
        <input type="password" name="currentPassword" placeholder="Current Password">
        <input type="password" name="newPassword" placeholder="New Password">
        <input type="password" name="confirmNewPassword" placeholder="Confirm New Password">
      </form>
      <div class="form-buttons">
        <button type="button" onclick="saveProfile()">Update Profile</button>
        <button type="button" onclick="closeProfile()" class="cancel">Close</button>
      </div>
    </div>
  </div>

  <script src="simple-auth.js"></script>
  <script src="interactive-bg.js"></script>
</body>

</html>